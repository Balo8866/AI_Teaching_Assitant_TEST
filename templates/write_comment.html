<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>æ’°å¯«å­¸ç”Ÿè©•èª</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='teacher_style.css') }}">
</head>
<body>

<header>
  <h1>æ’°å¯«å­¸ç”Ÿè©•èª</h1>
</header>

<div class="container">
  <form method="POST">
    <div>
      <label for="class">é¸æ“‡ç­ç´šï¼š</label>
      <select id="class" name="class" required>
        <option value="">è«‹é¸æ“‡ç­ç´š</option>
        {% for cls in student_data.keys() %}
          <option value="{{ cls }}">{{ cls }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label for="name">é¸æ“‡å­¸ç”Ÿï¼š</label>
      <select id="name" name="name" required>
        <option value="">è«‹å…ˆé¸æ“‡ç­ç´š</option>
      </select>
    </div>

    <div>
      <label for="comment">è©•èªå…§å®¹ï¼š</label>
      <textarea id="comment" name="comment" rows="6" required></textarea>
    </div>

    <button type="submit">é€å‡ºè©•èª</button>

    {% if saved %}
      <p class="success">âœ… æˆåŠŸå„²å­˜ {{ name }} çš„è©•èªã€‚</p>
    {% endif %}
  </form>
</div>

<div style="text-align: center;">
  <a href="/teacher_dashboard" class="back-home">ğŸ”™ å›æ•™å¸«é¦–é </a>
</div>

<!-- å®‰å…¨åµŒå…¥ JSON è³‡æ–™ -->
<script id="student-data" type="application/json">
  {{ student_data | tojson | safe }}
</script>

<script type="text/javascript">
  const studentData = JSON.parse(document.getElementById("student-data").textContent);
  const classSelect = document.getElementById("class");
  const nameSelect = document.getElementById("name");

  classSelect.addEventListener("change", () => {
    const selectedClass = classSelect.value;
    nameSelect.innerHTML = '<option value="">è«‹é¸æ“‡å­¸ç”Ÿ</option>';
    if (studentData[selectedClass]) {
      studentData[selectedClass].forEach(student => {
        const opt = document.createElement("option");
        opt.value = student;
        opt.textContent = student;
        nameSelect.appendChild(opt);
      });
    }
  });
</script>




</body>
</html>
